

# ndarray数组属性 2020/7/3

+ ndim：返回int。表示数组的位数
+ shape：返回tuple。表示数组的尺寸，比如n行m列的矩阵，形状为(n,m)

+ size：返回Int。表示数组的元素总数，数组形状的乘积
+ dtype：返回data-type。描述数组中元素的类型
+ itemsize：返回int。表示数组的每个元素的大小（以字节为单位）



# 数组的创建

```python
numpy.array(object, dtype=None, copy=True, order='K', subok=False,ndmin=0)
```

+ object：接收array。表示想要创建的数组
+ dtype：接收data-type。表示数组所需的数组类型。默认为None
+ ndmin：接收int。指定生成数组应具有的最小维数。默认为None



# 数组数据类型

+ bool：用一位存储布尔类型
+ inti：由所在平台决定其精度的整数（一般为in32或int64）
+ int8：整数（-128~127）
+ int16：整数（-32768~32767）
+ int32：整数（-2^31 ~ 2^32 -1）



注：**使用array函数创建数组时，数组的数据类型默认是浮点型**，可以通过dype参数来指定数据类型



# 生成随机数

+ 无约束条件生成随机数
  
+ `np.random.random(size=6) # 0~1之间`
  
+ 生成服从均匀分布的随机数
  
+ `np.random.rand(3, 2, 2) # 3行 2列 2纬度`
  
+ 生成标准正太分布的随机数
  
+ `np.random.randn(2, 3, 2) # 标准正太分布`
  
+ 生成给定上下范围的随机数
  
+ `np.random.randint(0, 10, size=(3, 2)) # 0~10内，3行2列的随机数`
  
+ 其他常用的随机数生成函数

    + seed()，确定随机数种子

    + permutation()，返回一个序列的随机排列或返回一个随机排列的范围

    + shuffle()，对一个序列进行随机排序

    + binomial()，产生二项分布的随机数

    + normal()，产生正太（高斯）分布的随机数

    + beta()，产生beta分布的随机数

    + chisquare()，产生卡方分布的随机数

    + gamma()，产生gamma分布的随机数

    + uniform()，产生在[0,1)中均匀分布的随机数

        

# 通过索引访问数组

类似切片

+ 一维数组的索引
    + arr[::2] # 最后一个2表示步长
    + 如果结束的值为负数，那么开始值一定要大于结束值

+ 二维数组的索引

    + ```python
        arr = np.array([[1,2,3], [4,5,6], [7,8,9]])
        arr[0, 3:5] # 索引第0行中第3和4列的元素
        arr[1:, 1:] # 索引2和3行中第2~3列元素 [[5,6], [8,9]]
        ```



# 变换数组的形状

+ 通过reshape(3, 4)来设置数组的形状

+ 使用ravel()来展平数组 
    + 也可以通过flatten()横向展平数组
    + 通过flatten('F')纵向展平数组

+ 组合数组
    + np.hstack((arr1, arr2))：数组横向组合
    + np.vstack((arr1, arr2))：数组纵向组合
    + np.concatcnate((arr1, arr2), axis=1)：数组横向组合
    + np.concatcnate((arr1, arr2), axis=0)：数组纵向组合

+ 切割数组
    + np.hsplit(arr, 2)，数组横向分割
    + np.vsplit(arr, 2)，数组纵向分割
    + np.split(arr, 2, axis=1)，数组横向分割
    + np.split(arr, 2, axis=0)，数组纵向分割



# Numpy矩阵

## 创建与组合矩阵

+ mat()创建矩阵
    + `matrix1 = np.mat("1 2 3;4 5 6;7 8 9")`
+ matrix()创建矩阵
    + `matrix2 = np.matrix([[123],[456],[789]]) `

+ bmat()合成矩阵
    + `np.bmat("arr1 arr2; arr1 arr2")`



## 矩阵的运算

+ 乘以常数
+ 矩阵相加减
+ 矩阵相乘
+ 矩阵对应元素相乘
+ 矩阵特有属性
    + T，转置
    + H，共轭转置
    + I，逆矩阵
    + A，自身数据的2维数组的一个视图



# 通用函数

+ 四则运算
    + 加+，减-，乘*，除/，幂**
    + 前提是形状必须相同
+ 比较运算
    + 返回的结果是一个布尔数组，对应的是数组中每个元素对应的比较结果
+ 逻辑运算
    + np.any()表示逻辑 or
    + np.all()表示逻辑 and
    + 运算结果返回布尔值



# 广播(broadcasting)机制

不同形状数组之间执行算术运算的方式

四个原则：

+ 所有输入数组都向其中shape最长的数组看齐，shape中不足的部分都通过前面加1补齐
+ 输出数组的shape是输入数组shape的各个轴上的最大值
+ 输入数组的某个轴和输出数组的对应轴的长度相同或者长度为1时，这个数组能够用来计算，否则出错
+ 输入数组的某个长度为1时，沿着此轴运算时都用此轴上的第一组值

比如

```python
x = np.array([[0]*3, [1]*3, [2]*3]) # 等同于np.array([[0, 0, 0], [1, 1, 1], [2, 2, 2]])
y = np.array([[1, 2, 3]])
z = np.array([[1], [2], [3]])
x + y
array([[1, 2, 3],
       [2, 3, 4],
       [3, 4, 5]])
# 等于 [[0, 0, 0],       [[1, 2, 3],
# 	   [1, 1, 1],   +    [1, 2, 3],
#	   [2, 2, 2]]		 [1, 2, 3]]

x + z
array([[1, 1, 1],
       [3, 3, 3],
       [5, 5, 5]])
# 等于 [[0, 0, 0],       [[1, 1, 1],
# 	   [1, 1, 1],   +    [2, 2, 2],
#	   [2, 2, 2]]		 [3, 3, 3]]
```





# Numpy读写文件 2020/7/4

numpy文件读写主要有**二进制的文件读写**和**文件列表形式的数据读写**两种形式

**二进制的文件读写**

+ save()，以二进制格式保存数据
    + np.save("./tmp/save_arr", arr) # 文件扩展名可以忽略，默认就是.npy
+ load()，从二进制文件中读取数据
    + np.load("./tmp/save_arr.npy") # 但是读取时不能忽略扩展名
+ savez()，可以将多个数组保存到一个文件中
    + np.savez("./tmp/savez_arr", arr1, arr2)

+ 存储时可以省略扩展名，但读取时不能省略扩展名



**文件列表形式的数据读写**

+ savetxt()，将数组写到某种分隔符隔开的文本文件中
    + np.savetxt("./tmp/arr.txt", arr, fmt="%d", delimiter=",") # fmt格式化，delimiter分隔符（默认空格）
    + 还有其他参数，比如编码格式encoding，新行newline等
+ loadtxt()，把文件加载到一个二维数组中
    + np.loadtxt("./tmp/arr.txt", delimiter=",")

+ genfromtxt()，面向结构化数组和缺失数据
    + np.genfromtxt("./tmp/arr.txt", delimiter=",")



# 使用数组进行简单统计分析

## 直接排序

+ sort()，最常用
    + arr.sort()，可以指定axis参数使得沿着指定轴对数据集进行排序，axis=1沿横轴，axis=0为沿纵轴



## 间接排序

+ argsort()，返回值为重新排序值在原数组的下标
+ lexsort()，返回值是按照最后一个传入数据排序的
    + np.lexsort((a, b, c))



## 去重与重复数据

+ unique()，找出数组中的唯一值，并返回已排序的结果
+ tile(A, reps)
    + 参数A，指定重复的数组
    + 参数reps，指定重复的次数
+ repeat(a, repeats, axis=None)
    + 参数a，需要重复的数组元素
    + 参数repeats，重复次数
    + 参数axis，指定沿着哪个轴进行重复
        + 0，表示按 行 进行元素重复
        + 1，表示按 列 进行元素重复



## 常用统计函数

当axis=0，表示沿着纵轴计算，当axis=1，表示沿着横轴计算

+ sum()，计算数组和
+ mean()，计算数组均值
+ std()，计算数组标准差
+ var()，计算数组方差
+ min()，计算数组最小值
+ max()，计算数组最大值
+ argmin()，返回数组最小元素的索引
+ argmax()，返回数组最大元素的索引
+ cumsum()，计算所有元素的累计和
+ cumprod()，计算所有元素的累计积